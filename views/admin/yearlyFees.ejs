<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Yearly Fees Management</title>
  <link rel="stylesheet" href="/css/style.css">
  <style>
    body { font-family: Arial, sans-serif; background-color: #f5f5f5; margin:0; padding:0; }
    .container { max-width: 800px; margin: 40px auto; background:#fff; padding:30px; border-radius:10px; box-shadow:0 4px 12px rgba(0,0,0,0.1); }
    h2, h3 { text-align:center; color:#333; margin-bottom:20px; }
    form.fee-form { display:flex; flex-wrap:wrap; gap:12px; justify-content:center; margin-bottom:30px; }
    form.fee-form label { flex:1 1 100%; font-weight:600; }
    form.fee-form input { flex:1 1 48%; padding:10px; border-radius:6px; border:1px solid #ccc; }
    form.fee-form button { flex:1 1 100%; padding:12px; background:#2e8b57; color:#fff; border:none; border-radius:6px; font-weight:600; cursor:pointer; transition:0.3s; }
    form.fee-form button:hover { background:#277445; }
    table { width:100%; border-collapse:collapse; margin-top:10px; }
    table th, table td { padding:12px; border-bottom:1px solid #ddd; text-align:center; }
    table th { background:#fafafa; font-weight:700; }
    tr:hover { background:#f1f1f1; }
  </style>
</head>
<body>
  <%- include("../partials/header") %>

  <div class="container">
    <h2>Manage Yearly Fees</h2>

    <form action="/admin/yearlyFees" method="POST" class="fee-form">
      <label for="year">Year:</label>
      <input type="number" id="year" name="year" required>

      <label for="room_rent">Room Rent (₹):</label>
      <input type="number" step="0.01" id="room_rent" name="room_rent" required>

      <label for="mess_bill1">Mess Bill 1 (₹):</label>
      <input type="number" step="0.01" id="mess_bill1" name="mess_bill1" required>

      <label for="mess_bill2">Mess Bill 2 (₹):</label>
      <input type="number" step="0.01" id="mess_bill2" name="mess_bill2" required>

      <button type="submit">Save / Update</button>
    </form>

    <h3>Existing Yearly Fees</h3>
    <table>
      <thead>
        <tr>
          <th>Year</th>
          <th>Room Rent (₹)</th>
          <th>Mess Bill 1 (₹)</th>
          <th>Mess Bill 2 (₹)</th>
          <th>Total Amount (₹)</th>
        </tr>
      </thead>
      <tbody>
        <% if(!fees || fees.length === 0) { %>
          <tr><td colspan="5">No fee data available.</td></tr>
        <% } else { %>
          <% fees.forEach(f => { %>
            <tr>
              <td><%= f.year %></td>
              <td>₹<%= parseFloat(f.room_rent || 0).toFixed(2) %></td>
              <td>₹<%= parseFloat(f.mess_bill1 || 0).toFixed(2) %></td>
              <td>₹<%= parseFloat(f.mess_bill2 || 0).toFixed(2) %></td>
              <td>₹<%= (parseFloat(f.room_rent || 0) + parseFloat(f.mess_bill1 || 0) + parseFloat(f.mess_bill2 || 0)).toFixed(2) %></td>
            </tr>
          <% }) %>
        <% } %>
      </tbody>
    </table>
  </div>
</body>
</html>
