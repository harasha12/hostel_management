<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Accepted Receipts</title>
  <link rel="stylesheet" href="/css/style.css">
</head>
<body>
  <%- include('../partials/header') %>

  <div class="container">
    <h2>Accepted / Verified Fee Receipts</h2>

    <% if (accepted.length === 0) { %>
      <p>No accepted receipts yet.</p>
    <% } else { %>
      <table border="1">
        <tr>
          <th>Student Name</th>
          <th>Student ID</th>
          <th>Ref ID</th>
          <th>Amount</th>
          <th>PDF</th>
          <th>Verified Date</th>
          <th>Status</th>
        </tr>

        <% accepted.forEach(r => { 
          let rowClass = '';
          if (r.status === 'verified') rowClass = 'row-verified';
          else if (r.status === 'rejected') rowClass = 'row-rejected';
          else if (r.status === 'pending') rowClass = 'row-pending';
        %>
        <tr class="<%= rowClass %>">
          <td><%= r.name %></td>
          <td><%= r.student_unique_id %></td>
          <td><%= r.ref_id %></td>
          <td><%= r.amount_paid %></td>
          <td>
            <% if (r.pdf_path) { %>
              <a href="<%= r.pdf_path %>" target="_blank" rel="noopener noreferrer" class="btn btn-sm btn-primary">
                View PDF
              </a>
            <% } else { %>
              <span style="color: gray;">N/A</span>
            <% } %>
          </td>
          <td><%= r.verified_at ? r.verified_at.toLocaleString() : 'N/A' %></td>
          <td><%= r.status.charAt(0).toUpperCase() + r.status.slice(1) %></td>
        </tr>
        <% }) %>
      </table>
    <% } %>

    <a href="/admin/dashboard" class="back-link">Back to Dashboard</a>
  </div>

  <%- include('../partials/footer') %>
</body>
</html>

<style>
  body {
    background: #f6f7fb;
    font-family: 'Poppins', 'Segoe UI', sans-serif;
    margin: 0;
    padding: 0;
    color: #1b2430;
  }

  .container {
    max-width: 1050px;
    margin: 60px auto 40px auto;
    background: #fff;
    padding: 35px 40px;
    border-radius: 16px;
    border: 3px solid #ffd700;
    box-shadow: 0 10px 35px #4E6FB5, 0 2px 6px #00000015;
  }

  h2 {
    text-align: center;
    font-weight: 800;
    font-size: 1.9em;
    color: #222;
    letter-spacing: 0.8px;
    margin-bottom: 25px;
    display: inline-block;
    border-bottom: 3px solid #ffd700;
    background: linear-gradient(90deg, #8E8EED 60%, #EBD483 100%);
    border-radius: 6px;
    padding: 8px 16px;
  }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 15px;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 2px 10px #00000010;
  }

  table th {
    background: linear-gradient(135deg, #f7d358, #f0b429);
    color: #222;
    padding: 14px;
    font-weight: 700;
    font-size: 1em;
    letter-spacing: 0.4px;
    border-bottom: 2px solid #ddd;
  }

  table td {
    padding: 12px 14px;
    border-bottom: 1px solid #eee;
    text-align: center;
    font-size: 0.97em;
    vertical-align: middle;
  }

  /* --- Row Color Based on Status --- */
  .row-pending {
    background-color: #ffffff;
    color: #222;
  }

  .row-verified {
    background-color: #e0f9e5; /* Light green */
    color: #1e7d32; /* Green text */
  }

  .row-rejected {
    background-color: #ffeaea; /* Light red */
    color: #b71c1c; /* Red text */
  }

  table tr:hover {
    transform: scale(1.01);
    transition: 0.2s ease-in-out;
  }

  .btn-primary {
    background: linear-gradient(135deg, #2196f3, #1976d2);
    color: #fff;
    padding: 6px 14px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    transition: 0.3s ease;
    display: inline-block;
  }

  .btn-primary:hover {
    background: linear-gradient(135deg, #42a5f5, #1565c0);
    transform: translateY(-2px);
  }

  .back-link {
    display: block;
    margin: 30px auto 0 auto;
    text-align: center;
    font-weight: 700;
    color: #fff;
    text-decoration: none;
    font-size: 1.05em;
    width: 60%;
    max-width: 340px;
    padding: 12px 0;
    border-radius: 50px;
    background: linear-gradient(90deg, #d4af37, #ffdd00);
    box-shadow: 0 4px 12px #d4af3744;
    transition: all 0.25s ease;
  }

  .back-link:hover {
    background: linear-gradient(90deg, #ffdd00, #ffe382);
    color: #1b243b;
    transform: scale(1.06);
    box-shadow: 0 0 20px #ffe082a9;
  }
</style>